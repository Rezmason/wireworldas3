#!/bin/bash

#Here's the address to mxmlc. Modify it if yours isn't here.
mxmlc=~/bin/flex/bin/mxmlc

#find the folder "wireworld" in this executable's parent directory
abspath="$(cd "${0%/*}" 2>/dev/null; echo "$PWD"/"${0##*/}")"
mydir=`dirname "$abspath"`

pushd $mydir/../

flexSWC=~/bin/flex/frameworks/libs
ktweenSWC="./lib/ktween.swc"

function wwBuild {

	if [ $# -lt 3 ]
	then
	  echo "Too few arguments."
	  exit 1
	fi

	debug=false
	optimize=false
	if [ $# -ge 6 ] && $6; then
		debug=true
	else
		debug=false
		optimize=true
	fi

	echo "$1 $2, $3, debug = $debug"

	"$mxmlc" src/Wireworld.as -sp src -o deploy/bin/$3.swf -l $flexSWC $ktweenSWC -static-link-runtime-shared-libraries=true -optimize=$optimize -debug=$debug -target-player=10.1 &&

	echo
}

wwBuild STANDARD DESKTOP wwdebug false false true
#wwBuild HAXE DESKTOP wwdebug true false false
#wwBuild TREE DESKTOP wwdebug false false true

#wwBuild STANDARD DESKTOP wwdebug true

popd
